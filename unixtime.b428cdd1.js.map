{"mappings":"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","sources":["./node_modules/@parcel/scope-hoisting/lib/helpers.js","./src/components/unixtime/DateTimeInput.tsx","./src/components/unixtime/UnixTimeInput.tsx","./src/components/unixtime/Main.tsx","./src/unixtime.tsx"],"sourcesContent":["var $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$export(e, n, v) {\n  Object.defineProperty(e, n, {get: v, enumerable: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n","import React, { useEffect } from \"react\";\nimport {FunctionComponent, useState} from \"react\";\nimport \"./DateTimeInput.css\";\n\ntype Props = {\n    unixTimeMillis: number;\n    setUnixTimeMillis: (unitTime: number)=>void;\n    title: string;\n}\n\nconst DateTimeInput: FunctionComponent<Props> = ({unixTimeMillis, setUnixTimeMillis, title}) => {\n    const date = new Date(unixTimeMillis);\n\n    const [y, setY] = useState(`${date.getFullYear()}`);\n    const [M, setM] = useState(`${date.getMonth()+1}`);\n    const [d, setD] = useState(`${date.getDate()}`);\n    const [h, setH] = useState(`${date.getHours()}`);\n    const [m, setm] = useState(`${date.getMinutes()}`);\n    const [s, setS] = useState(`${date.getSeconds()}`);\n\n    const componentDate = buildDate(y, M, d, h, m, s);\n\n    useEffect(() => {\n        if(componentDate && (componentDate.getTime() == date.getTime())) {\n            return;\n        }\n        setY(pad(date.getFullYear()));\n        setM(pad(date.getMonth() + 1));\n        setD(pad(date.getDate()));\n        setH(pad(date.getHours()));\n        setm(pad(date.getMinutes()));\n        setS(pad(date.getSeconds()));\n    }, [unixTimeMillis]);\n\n    const wrongRange = date.getFullYear()>2200 || date.getFullYear()<1980;\n\n    return <div className={\"DateTimeInput \"+ (wrongRange ? \"DateTimeInput--wrong\" : \"\")}>\n        {title}\n        <input value={y} size={5} style={{textAlign: \"right\"}} onChange={(e)=>{const v = e.target.value; setY(v);propagate(v, M, d, h, m, s);}} />-\n        <input value={M} size={2} maxLength={2} onChange={(e)=>{const v = e.target.value; setM(v);propagate(y, v, d, h, m, s);}} />-\n        <input value={d} size={2} maxLength={2} onChange={(e)=>{const v = e.target.value; setD(v);propagate(y, M, v, h, m, s);}} />-\n        <input value={h} size={2} maxLength={2} onChange={(e)=>{const v = e.target.value; setH(v);propagate(y, M, d, v, m, s);}} />-\n        <input value={m} size={2} maxLength={2} onChange={(e)=>{const v = e.target.value; setm(v);propagate(y, M, d, h, v, s);}} />-\n        <input value={s} size={2} maxLength={2} onChange={(e)=>{const v = e.target.value; setS(v);propagate(y, M, d, h, m, v);}} />\n        <Offset date={date} />\n    </div>;\n\n    function propagate(ys: string, Ms: string, ds: string, hs: string, ms: string, ss: string) {\n        const newDate = buildDate(ys, Ms, ds, hs, ms, ss);\n        if(newDate) {\n            setUnixTimeMillis(newDate.getTime());\n        }\n    }\n}\n\nconst Offset: FunctionComponent<{date: Date}> = ({date}) => {\n    const offset = date.getTimezoneOffset();\n    return <>{`${offset<=0 ? \"+\" : \"-\"}${pad(Math.abs(offset)/60*100, 4)}`}</>\n}\n\nfunction pad(n: number, len = 2) {\n    let ns = n.toString();\n    return new Array(Math.max(len-ns.length+1, 0)).join(\"0\")+ns;\n}\n\nfunction buildDate(ys: string, Ms: string, ds: string, hs: string, ms: string, ss: string): Date | undefined {\n    const y = parseInt(ys);\n    const M = parseInt(Ms);\n    const d = parseInt(ds);\n    const h = parseInt(hs);\n    const m = parseInt(ms);\n    const s = parseInt(ss);\n    if(!(y>0 && 1<=M && M<=12 && 1<=d && d<=31 && 0<=h && h<=23 && 0<=m && m<=59 && 0<=s && s<=59)){\n        return;\n    }\n    return new Date(y, M-1, d, h, m, s)\n}\n\nexport default DateTimeInput;\n","import { useState, useCallback, useEffect, useRef, useLayoutEffect } from \"react\";\nimport React from \"react\";\n\nconst UnixTimeInput = ({unixTime, setUnixTime, noInteractionYet}) => {\n    const ref = useRef<HTMLInputElement>();\n    const [text, setText] = useState(`${unixTime}`);\n    const onChange = useCallback((e)=>{\n        setText(e.target.value);\n        const time = parseInt(e.target.value);\n        if(!isNaN(time)) {\n            setUnixTime(time);\n        }\n    }, [setText]);\n\n    const componentDate = buildDate(text);\n    useEffect(() => {\n        if(componentDate && componentDate.getTime() == unixTime) {\n            return;\n        }\n        setText(`${unixTime}`);\n    }, [unixTime]);\n\n    useSelectAllWhileNoInteraction(noInteractionYet, ref.current);\n\n    return (\n        <input value={text} onChange={onChange} ref={ref} style={{\n            width: \"100%\"\n        }}  placeholder=\"Unixtime (e.g. 1234567890)\" autoFocus />\n    );\n}\n\nconst useSelectAllWhileNoInteraction = (noInteractionYet: boolean, inputElement: HTMLInputElement) => {\n    useLayoutEffect(()=> {\n        if(noInteractionYet && inputElement) {\n            inputElement.setSelectionRange(0, inputElement.value.length);\n        }\n    });\n}\n\nconst buildDate = (text: string) => {\n    const time = parseInt(text);\n    return isNaN(time) ? undefined : new Date(time);\n}\n\nexport default UnixTimeInput;\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport DateTimeInput from \"./DateTimeInput\";\nimport UnixTimeInput from \"./UnixTimeInput\";\nimport \"./Main.css\";\n\nlet id: number | undefined = -1; // Should be per component\n\nconst Main = () => {\n    const [unixTime, setUnixTime] = useState(Math.floor(new Date().getTime()/1000));\n\n    const onFirstInteraction = useCallback(() => {\n        if (id > 0) {\n            cancelAnimationFrame(id);\n        }\n        id = undefined;\n    }, []);\n\n    useEffect(() => {\n        let currentTime: number;\n        id = requestAnimationFrame(animate);\n        function animate () {\n            const newTime = Math.floor(new Date().getTime()/1000);\n            if(currentTime!=newTime) {\n                currentTime = newTime;\n                setUnixTime(newTime);\n            }\n            id = requestAnimationFrame(animate);\n        }\n\n        return () => {\n            cancelAnimationFrame(id);\n        }\n    }, [])\n\n    return <div onMouseDown={onFirstInteraction} onKeyDown={onFirstInteraction}>\n        <UnixTimeInput unixTime={Math.floor(unixTime)} setUnixTime={setUnixTime} noInteractionYet={!isNaN(id)} />\n        <DateTimeInput title=\"(s)\" unixTimeMillis={unixTime * 1000} setUnixTimeMillis={(s) => {\n            setUnixTime(Math.floor(s/1000));\n        }} />\n        <DateTimeInput title=\"(ms)\" unixTimeMillis={unixTime} setUnixTimeMillis={(s)=>{\n            setUnixTime(Math.floor(s));\n        }} />\n    </div>\n}\n\nexport default Main;\n","import React from \"react\";\nimport {render} from \"react-dom\";\nimport Main from \"./components/unixtime/Main\";\n\nrender(<Main />, document.getElementById(\"main\"));\n"],"names":["a","globalThis","self","window","global","__esModule","default","$acf8d96e8bee2c254e827f06d97ac104$export$default","unixTimeMillis","setUnixTimeMillis","title","date","Date","y","setY","getFullYear","M","setM","getMonth","d","setD","getDate","h","setH","getHours","m","setm","getMinutes","s","setS","getSeconds","componentDate","$acf8d96e8bee2c254e827f06d97ac104$var$buildDate","getTime","$acf8d96e8bee2c254e827f06d97ac104$var$pad","wrongRange","className","value","size","style","textAlign","onChange","e","v","target","propagate","maxLength","$acf8d96e8bee2c254e827f06d97ac104$var$Offset","ys","Ms","ds","hs","ms","ss","newDate","offset","getTimezoneOffset","Math","abs","n","len","ns","toString","Array","max","length","join","parseInt","$901aed1879b334c272b829a794b35552$export$default","unixTime","setUnixTime","noInteractionYet","ref","text","setText","time","isNaN","$901aed1879b334c272b829a794b35552$var$buildDate","$901aed1879b334c272b829a794b35552$var$useSelectAllWhileNoInteraction","current","width","placeholder","autoFocus","inputElement","setSelectionRange","undefined","$150ddd6f6ec981d06863e70aaee7efb6$var$id","$150ddd6f6ec981d06863e70aaee7efb6$export$default","floor","onFirstInteraction","cancelAnimationFrame","currentTime","requestAnimationFrame","animate","newTime","onMouseDown","onKeyDown","document","getElementById"],"version":3,"file":"unixtime.b428cdd1.js.map"}